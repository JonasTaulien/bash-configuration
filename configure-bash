#!/bin/bash
##############################
# Exports:
# - jr_funct_get_absolute_path_of_parent_directory
#   @see jr_doc_funct_get_absolute_path_of_parent_directory
#
# - jr_const_bash_configuration_root
#   @see jr_doc_const_bash_configuration_root
#
# - whatever function/get_operating_system exports
# - whatever function/file_contains exports
# - whatever function/idempotent_append
##############################



alias jr_doc_funct_get_absolute_path_of_parent_directory="echo \"$(cat <<'//'
##########
# Calculates the absolute path of the parent directory of the given path.
# If the given path is relative, it is assumed, that it is relative to the current working directory
# Example: Get base-path of current script: \$(jr_funct_get_absolute_path_of_parent_directory "\${BASH_SOURCE[0]}")
#
# @param1 A (maybe relative) path to a file or directory
# @stdout Absolute path of the parent directory of the file or directory
##########
//
)\""
jr_funct_get_absolute_path_of_parent_directory(){
    local path="${1}"
    echo -n "$(cd "$(dirname "${path}")" && pwd)"
}
export -f jr_funct_get_absolute_path_of_parent_directory



alias jr_doc_const_bash_configuration_root="echo \"$(cat <<'//'
##########
# Absolute path to the bash configuration root directory.
#
# @type String
##########
//
)\""
pathnameOfCurrentlyExecutingScript=${BASH_SOURCE[0]}
export jr_const_bash_configuration_root="$(jr_funct_get_absolute_path_of_parent_directory "${pathnameOfCurrentlyExecutingScript}")"



# Source functions
source "${jr_const_bash_configuration_root}/function/get_operating_system"
source "${jr_const_bash_configuration_root}/function/file_contains"
source "${jr_const_bash_configuration_root}/function/idempotent_append"



# Add sourcing of itself to ~/.bashrc
pathToConfigureBash="${jr_const_bash_configuration_root}/configure-bash"
sourceString=$(cat <<//


if [ -f "${pathToConfigureBash}" ]; then
    source "${pathToConfigureBash}"
fi
//
)
if jr_funct_idempotent_append ~/.bashrc "${sourceString}"; then
    echo "Added sourcing of myself (${pathToConfigureBash}) to ~/.bashrc"
fi 
# Install/update [bash-completion](http://bash-completion.alioth.debian.org | http://davidalger.com/development/bash-completion-on-os-x-with-brew)
# Install/update [bash-sensible](https://github.com/mrzool/bash-sensible)